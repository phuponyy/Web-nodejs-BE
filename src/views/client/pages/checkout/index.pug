extends ../../layout/default.pug
include ../../mixins/box-head.pug

block main 
    .container.my-3
        .row
            .col-12
                +box-head("Thanh toán")
        if(cartDetail.products.length > 0)
            .row
                .col-12
                    table(class="table table-bordered")
                        thead
                            tr
                                th STT
                                th Hình ảnh
                                th Tên SP
                                th Giá
                                th Số lượng
                                th Tổng tiền
                        tbody

                            each item, index in cartDetail.products
                                tr
                                    td #{index+1}
                                    td
                                        img(src=item.productInfo.thumbnail alt=item.productInfo.title width="80px")
                                    td #{item.productInfo.title}
                                    td #{item.productInfo.priceNew}$
                                    td #{item.quantity}
                                    td #{item.totalPrice}$
                    .row.text-end
                        h3(class="text-right") Tổng đơn hàng: #{cartDetail.totalPrice}$

            .row
                .col-12
                    .card.p-4.my-4
                        form(
                            action=`/checkout/order`
                            method="POST"
                        )
                            div(class="form-group")
                                label(for="fullName") Họ tên *
                                input(
                                    type="text"
                                    class="form-control"
                                    id="fullName"
                                    name="fullName"
                                    required
                                )
                            div(class="form-group")
                                label(for="email") Email *
                                input(
                                    type="email"
                                    class="form-control"
                                    id="email"
                                    name="email"
                                    required
                                )
                            div(class="form-group")
                                label(for="phone") Điện thoại *
                                input(
                                    type="text"
                                    class="form-control"
                                    id="phone"
                                    name="phone"
                                    required
                                )
                            div(class="form-group")
                                label(for="address") Địa chỉ *
                                input(
                                    type="text"
                                    class="form-control"
                                    id="address"
                                    name="address"
                                    required
                                )
                            div(class="form-group mb-3")
                                label(for="note") Ghi chú
                                textarea(
                                    class="form-control"
                                    id="note"
                                    name="note"
                                )
                            div.form-group
                                button(
                                    type="submit"
                                    class="btn btn-success w-100"
                                ) ĐẶT HÀNG!

        else
            row
                h3.text-danger.text-center Không tìm thấy sản phẩm nào trong giỏ hàng!
                div.d-flex.justify-content-center
                    a(
                        href="/products"
                        class="btn btn-primary mb-3"
                    ) Thêm sản phẩm
